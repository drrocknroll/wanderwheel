{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Card or Quiz schema",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the card (e.g. 'SD-XXXX-RU' or 'QZ-001-EN')."
    },
    "language": {
      "type": "string",
      "description": "Language code, e.g. 'ru', 'en', 'cn', etc."
    },
    "city": {
      "type": "string",
      "description": "City or region code, e.g. 'spb', 'moscow', 'all'."
    },
    "interactive": {
      "type": "boolean",
      "description": "True if it's a quiz, false (or omitted) for a normal fact card."
    },
    "title": {
      "type": "string",
      "description": "Title for a normal card (ignored if it's a quiz)."
    },
    "text": {
      "type": "string",
      "description": "Main text content for a normal card (ignored if it's a quiz)."
    },
    "question": {
      "type": "string",
      "description": "Quiz question if interactive = true."
    },
    "options": {
      "type": "array",
      "items": { "type": "string" },
      "description": "List of possible answers for the quiz."
    },
    "correct_index": {
      "type": "integer",
      "description": "0-based index of the correct answer in 'options'."
    },
    "explanation": {
      "type": "string",
      "description": "Optional explanation shown after answering the quiz."
    },
    "image_url": {
      "type": "string"
    },
    "thumbnail_url": {
      "type": "string"
    },
    "tags": {
      "type": "array",
      "items": { "type": "string" }
    }
    /* ... При желании добавляйте другие поля (e.g. location, related) */
  },
  "required": ["id", "language", "city"],

  "anyOf": [
    {
      "properties": {
        "interactive": {
          "const": true
        }
      },
      "required": ["interactive", "question", "options", "correct_index"]
    },
    {
      "properties": {
        "interactive": {
          "enum": [false]
        }
      },
      "required": ["title", "text"]
    },
    {
      "properties": {
        "interactive": {
          "not": {}
        }
      },
      "required": ["title", "text"]
    }
  ]
}
